CREATE SCHEMA `mutualfunds` ;

User Table

CREATE TABLE USERS
(
    ID BINARY(16) PRIMARY KEY NOT NULL,
    FIRST_NAME VARCHAR(256) NOT NULL,
    LAST_NAME VARCHAR(256) NOT NULL,
    MIDDLE_NAME VARCHAR(256),
    GENDER VARCHAR(8) DEFAULT 'MALE' NOT NULL,
    MOBILE VARCHAR(32) NOT NULL,
    EMAIL VARCHAR(256) NOT NULL,
    USERNAME VARCHAR(256) NOT NULL,
    PASSWORD VARCHAR(256) NOT NULL,
    URL VARCHAR(512),
    DELETED TINYINT DEFAULT 0 NOT NULL,
    CREATED DATETIME(6),
    UPDATED DATETIME(6),
    CREATED_BY VARCHAR(256),
    UPDATED_BY VARCHAR(256)
);
CREATE UNIQUE INDEX USERS_MOBILE_UK ON USERS (MOBILE);
CREATE UNIQUE INDEX USERS_EMAIL_UK ON USERS (EMAIL);
CREATE UNIQUE INDEX USERS_USERNAME_UK ON USERS (USERNAME);

Role Table

CREATE TABLE ROLES
(
    ID BINARY(16) PRIMARY KEY NOT NULL,
    ROLE VARCHAR(64) NOT NULL,
    DELETED TINYINT DEFAULT 0 NOT NULL,
    CREATED DATETIME(6),
    UPDATED DATETIME(6),
    CREATED_BY VARCHAR(256),
    UPDATED_BY VARCHAR(256)
);

User Roles

CREATE TABLE USER_ROLES
(
    ID BINARY(16) PRIMARY KEY NOT NULL,
    USER_ID BINARY(20) NOT NULL,
    ROLE_ID BINARY(20) NOT NULL,
    DELETED TINYINT DEFAULT 0 NOT NULL,
    CREATED DATETIME(6),
    UPDATED DATETIME(6),
    CREATED_BY VARCHAR(20),
    UPDATED_BY VARCHAR(20),
    CONSTRAINT USER_ROLES_USERS_FK FOREIGN KEY (USER_ID) REFERENCES USERS (ID),
    CONSTRAINT USER_ROLES_ROLES_FK FOREIGN KEY (ROLE_ID) REFERENCES ROLES (ID)
);
CREATE UNIQUE INDEX USER_ROLES_UK ON USER_ROLES (USER_ID, ROLE_ID);